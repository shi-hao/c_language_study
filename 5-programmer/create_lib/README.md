# 动态库，静态库    
  
  
## shared libraries  
  
### shared libraries names and directories  
1.动态库命名规则  
以lib开头，加上自定义名字，加上.so，再加上时间版本号等信息。  
  
2.动态库默认路径  
linux系统下，动态库的默认路径一般是/lib和/usr/lib，以及/etc/ld.so.conf文件  
中包含的路径  
  
3.动态库运行时加载  
程序在执行时，系统会在指定的目录下搜索需要的动态库，找到后，加载动态库，  
找不到则会报库无法找到的错误。  
  
在实际使用中，每次搜索文件夹是很低效的，linux引入了缓存机制，使用ldconfig  
工具会将指定文件夹下的动态库生成一个缓存文件(/etc/ld.so.cache)，缓存文件中  
是动态库和路径的对应关系，比如动态库libssl.so.1.1在路径/usr/lib下，缓存文件  
中会生成一条映射 libssl.so.1.1  /usr/lib/lissl.so.1.1，这样系统在加载动态库  
时，可以查找缓存文件，提高效率。  
  
缓存文件中查找失败，是否会继续查找系统路径？  
  
4.动态库编译时调用  
当编译可执行文件时，使用-l指定库名，使用-L指定库路径，可以不指定路径，系统  
会去默认路径下查找库(查找/etc/ld.so.cache文件)。  
  
为了提高使用的方便性，linux会在库路径下为动态库生成软件链接，比如库libssl.so.1.1，  
生成一个软件链接libssl.so指向库文件，当用户在编译可执行文件时，直接使用-lssl就可  
以调用到libssl.so.1.1，十分方便。  
  
5.动态库安装  
最简单的动态库安装方法是，将生成的动态库复制到系统库目录下，然后使用ldconfig更新  
库缓存。  
  
6.系统环境变量  
linux系统下有一些环境变量，会影响到动态库的路径，比如LD_LIBRARY_PATH，这个环境变量  
的优先级比较高，在程序执行时，会想搜索环境变量文件夹的库。  
  
**多版本动态库并存**  
多个版本的动态库，版本之间不兼容，不同的应用程序依赖于不同版本的库，如何解决这个问题？  
将多个版本的库复制到系统路径下即可，注意，在编译可执行文件时，要分清楚使用的是哪个版  
本的动态库，注意文件链接的问题！！  
  
**查看elf文件动态库信息**  
linux ldd查看elf文件需要的库。    
ldd    elf-file      
